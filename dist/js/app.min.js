!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var e=document;function t(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var n,r=(function(e,n){e.exports=function e(n,r,i){function o(s,c){if(!r[s]){if(!n[s]){var u=t;if(!c&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};n[s][0].call(f.exports,function(e){var t=n[s][1][e];return o(t||e)},f,f.exports,e,n,r,i)}return r[s].exports}for(var a=t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var r=e("./lib/fingerprint.js"),i=e("./lib/pad.js"),o=0,a=4,s=36,c=Math.pow(s,a);function u(){return i((Math.random()*c<<0).toString(s),a)}function l(){return o=o<c?o:0,++o-1}function f(){var e=(new Date).getTime().toString(s),t=i(l().toString(s),a),n=r(),o=u()+u();return"c"+e+t+n+o}f.slug=function(){var e=(new Date).getTime().toString(36),t=l().toString(36).slice(-4),n=r().slice(0,1)+r().slice(-1),i=u().slice(-2);return e.slice(-2)+t+n+i},f.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},f.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},f.fingerprint=r,t.exports=f},{"./lib/fingerprint.js":2,"./lib/pad.js":3}],2:[function(e,t,n){var r=e("./pad.js"),i="object"==typeof window?window:self,o=Object.keys(i).length,a=navigator.mimeTypes?navigator.mimeTypes.length:0,s=r((a+navigator.userAgent.length).toString(36)+o.toString(36),4);t.exports=function(){return s}},{"./pad.js":3}],3:[function(e,t,n){t.exports=function(e,t){var n="000000000"+e;return n.substr(n.length-t)}},{}]},{},[1])(1)}(n={exports:{}},n.exports),n.exports);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const c="attributes",u="text",l="tag",f=/([\w-]*)=(([{[]|['"])([-\w :,'"]+)([\]}]|['"]))/g,p=(e,t=l)=>({value:e,type:t});var d=e=>{let t,n,r,i=[],o=(e=e.trim()).length;t=n=0;const a=()=>n>o,s=()=>{let t=n;return e[++t]},l=(e=1)=>1===e?n++:n+=e,d=()=>t=n,h=(t,n)=>e.slice(t,n);for(;!a();){const e=s();if("("===e){for(i.push(p(h(t,n+1))),l(2),d();!a()&&")"!==s();)l();if(i.push(p(h(t,n+1),c)),l(),d()," "===s()){for(l(2),d();!a();)l();i.push(p(h(t,n),u)),d()}}else if(" "===e){for(i.push(p(h(t,n+1))),l(2),d();!a();)l();i.push(p(h(t,n),u)),l(),d()}else l()}return 0===t&&i.push(p(h(t,n))),i.forEach(e=>{if("tag"===e.type)r=document.createElement(e.value);else if(e.type===c){let t=`[${e.value.replace(f,'{"attribute":"$1", "value":$2},').slice(0,-1)}]`;JSON.parse(t).forEach(e=>{const{attribute:t,value:n}=e;t.includes("data")&&"string"!=typeof n?r.setAttribute(t,JSON.stringify(n)):r.setAttribute(t,n)})}else e.type===u&&(r.innerText=e.value)}),r},h={LI:"grocery__item",GRID:"grid",GRID_COL_2:"grid__column-2 flex-content-h-center",GRID_COL_4:"grid__column-4 flex-content-h-center",GRID_COL_6:"grid__column-6 flex",ITEM_QTY:"grocery__item-quantity text-align-center",ITEM_NAME:"grocery__item-title",ACTIONS:"grocery__list-actions flex",BTN_REMOVE:"grocery__list-button remove",BTN_PURCHASE:"grocery__list-button purchase",TIMES_ICON:"fas fa-times-circle",CHECK_ICON:"fas fa-check-circle"},v={REMOVE:"remove",PURCHASE:"purchase"};function m(e){var t=e.id,n=e.item,r=e.quantity,i=d('li(class="'.concat(h.LI,'" data-id="').concat(t,'" data-item="').concat(n,'")')),o=d('div(class="'.concat(h.GRID,'")')),a=d('div(class="'.concat(h.GRID_COL_2,'")')),s=d('div(class="'.concat(h.GRID_COL_4,'")')),c=d('div(class="'.concat(h.GRID_COL_6,'")')),u=d('p(class="'.concat(h.ITEM_QTY,'") ').concat(r)),l=d('p(class="'.concat(h.ITEM_NAME,'") ').concat(n)),f=d('div(class="'.concat(h.ACTIONS,'")')),p=d('button(type="button" class="'.concat(h.BTN_REMOVE,'" data-action="').concat(v.REMOVE,'")')),m=d('button(type="button" class="'.concat(h.BTN_PURCHASE,'" data-action="').concat(v.PURCHASE,'")')),y=d('i(class="'.concat(h.TIMES_ICON,'" data-action="').concat(v.REMOVE,'")')),g=d('i(class="'.concat(h.CHECK_ICON,'" data-action="').concat(v.PURCHASE,'")'));return p.appendChild(y),m.appendChild(g),f.appendChild(p),f.appendChild(m),c.appendChild(f),s.appendChild(l),a.appendChild(u),o.appendChild(a),o.appendChild(s),o.appendChild(c),i.appendChild(o),i}function y(){return JSON.parse(localStorage.getItem("basket"))||{list:[],purchased:[]}}var g=(e,t,n=!1)=>{const r=void 0!==t,i=[];let o=e;for(n||(o=o.parentElement);null!==o;)o.nodeType===Node.ELEMENT_NODE&&(r&&!o.matches(t)||i.push(o)),o=o.parentElement;return i};var _={LI:"suggested__item",BUTTON:"suggested__button"},b={ADD:"add"};function E(e,t){var n=e.querySelector(".suggested"),r=n.querySelector(".suggested__list");n.addEventListener("click",function(e){var n=e.target;return n.dataset.action===b.ADD&&void t.emit("add-item-to-input",n.dataset.item)}),t.on("app.load-data",function(){var e=y();if(e.purchased.length>0){var t=d('h2(class="suggested__title text-align-center") Past purchased items');n.insertBefore(t,n.firstChild);var i=document.createDocumentFragment();e.purchased.forEach(function(e){i.appendChild(function(e){var t=d('li(class="'.concat(_.LI,'")')),n=d('button(type="button" class="'.concat(_.BUTTON,'" \n    data-action="').concat(b.ADD,'" data-item="').concat(e,'") ').concat(e));return t.appendChild(n),t}(e))}),r.appendChild(i)}})}function w(){}function C(){C.init.call(this)}function L(e){return void 0===e._maxListeners?C.defaultMaxListeners:e._maxListeners}function O(e,t,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new w,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=L(e))&&i>0&&a.length>i){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[t]=n,++e._eventsCount;return e}function S(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function x(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function T(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function I(){var e=document.getElementById("app"),t=new C;t.on("app.add-item-to-basket",function(e){return function(e){var t=y(),n=o({},t,{list:s(t.list).concat([o({},e)])});localStorage.setItem("basket",JSON.stringify(n))}(e)}),t.on("app.add-purchased-item-to-basket",function(e){return function(e){var t=y();if(!t.purchased.includes(e)){var n=o({},t,{purchased:s(t.purchased).concat([e])});localStorage.setItem("basket",JSON.stringify(n))}}(e)}),t.on("app.remove-item-from-basket",function(e){return function(e){var t=y(),n=t.list.filter(function(t){return t.id!==e}),r=o({},t,{list:s(n)});localStorage.setItem("basket",JSON.stringify(r))}(e)}),function(e,t){var n=e.querySelector(".grocery__list"),r=".grocery__item";n.addEventListener("click",function(e){var i=e.target;switch(i.dataset.action){case"remove":var o=a(g(i,r,!0),1)[0];n.removeChild(o),t.emit("app.remove-item-from-basket",o.dataset.id);break;case"purchase":var s=a(g(i,r,!0),1)[0];n.removeChild(s),t.emit("app.remove-item-from-basket",s.dataset.id),t.emit("app.add-purchased-item-to-basket",s.dataset.item)}}),t.on("add-to-list",function(e){var r=m(e);n.appendChild(r),t.emit("app.add-item-to-basket",e)}),t.on("app.load-data",function(){var e=y();if(e.list.length>0){var t=document.createDocumentFragment();e.list.forEach(function(e){return t.appendChild(m(e))}),n.appendChild(t)}})}(e,t),function(e,t){var n=e.querySelector(".form"),i=n.querySelector("[name=item]"),o=n.querySelector("[name=qty]");t.on("add-item-to-input",function(e){return i.value=e}),n.addEventListener("submit",function(e){e.preventDefault();var n=i.value.trim(),a=o.value;if(""===n)return!1;t.emit("add-to-list",{id:r(),item:n,quantity:a}),i.value="","1"!=typeof a&&(o.value="1")})}(e,t),E(e,t),t.emit("app.load-data")}w.prototype=Object.create(null),C.EventEmitter=C,C.usingDomains=!1,C.prototype.domain=void 0,C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.init=function(){this.domain=null,C.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new w,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},C.prototype.getMaxListeners=function(){return L(this)},C.prototype.emit=function(e){var t,n,r,i,o,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=T(e,r),o=0;o<r;++o)i[o].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=T(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=T(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=T(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=T(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,l,this,i)}return!0},C.prototype.addListener=function(e,t){return O(this,e,t,!1)},C.prototype.on=C.prototype.addListener,C.prototype.prependListener=function(e,t){return O(this,e,t,!0)},C.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,S(this,e,t)),this},C.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,S(this,e,t)),this},C.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new w:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new w,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},C.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new w,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new w:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new w,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},C.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},C.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):x.call(e,t)},C.prototype.listenerCount=x,C.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},function(t){(e.attachEvent?"complete"===e.readyState:"loading"!==e.readyState)?t():e.addEventListener("DOMContentLoaded",t)}(function(){I()})});
